---
title: 菜鸟浅谈Hystrix
---

## Hystrix是什么？
> Hystrix 是[Netflix](https://www.netflix.com/)为了预防服务间因某个服务故障导致整个系统雪崩而设计的高可用服务容错框架！有点抽象？往下看。。。

## Hystrix要解决的问题？
> **应用背景:** 在复杂的分布式系统架构中，每个服务都有很多的依赖服务，而每个依赖服务都可能会故障，如果服务没有和自己的依赖服务进行隔离，那么可能某一个依赖服务的故障就会拖垮当前这个服务。Hystrix就是通过相应方法来阻止当前服务被拖垮的一个容错框架！

**还是抽象？看下图。。。**
![服务依赖](https://raw.githubusercontent.com/lz330718637/Images/master/20180812232203.png)
> 任何应用（现在微服务比较流行，那就叫一个服务吧）通常都是部署在一个web容器中供外部用户调用，常见的web容器：大家最熟悉的Tomcat或者Weblogic、Jboss、Jetty等。外部用户的每次调用，web容器都将启动一个线程去处理请求。
> 小明（用户请求）为了显摆，想约四个美女吃饭！A、H、I、P四大美女（服务）！！！正常情况下，若四个美女都比较好说话，那小明的愿望就能很快达成了。万事大吉。。。阿弥陀佛。。。

> 但是有些美女总是要矜持一下的，美女I就完全不搭理小明的请求。过了一段时间小明吃了闭门羹。灰头土脸的回去了。。。。
![服务依赖](https://raw.githubusercontent.com/lz330718637/Images/master/20180812234547.png)

> 俗话说的好，刘备三顾茅庐才请到诸葛大神！小明当然明白这个道理，于是乎不顾疲倦的一次又一次的换着身份（web容器启动其他线程）去约美女I，但美女I一直都不鸟这个他。最终小明为了美女I一棵树，放弃了整片森林。。。。
![服务依赖](https://raw.githubusercontent.com/lz330718637/Images/master/20180812235329.png)

> 发现这个例子不咋地（尴尬。。。）还是用比较正式的话描述一下吧：上面三张图表示通常在服务调用中从最开始的正常调用，到出现一个调用异常（调用方没有获取依赖服务I的响应，当前线程卡住，则线程资源得不到释放，如果这对该服务的并发访问比较高的话，其他线程资源都会来调用该服务）最后所有的进程资源全部用来访问该服务而导致资源耗尽从而使当前服务崩溃，最后可能整个分布式系统的雪崩！